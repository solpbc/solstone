{% extends 'base.html' %}
{% set title = 'Admin' %}
{% set active = 'admin' %}
{% block head %}
<style>
body { font-family: sans-serif; margin:0; }
.container { max-width:600px; margin:0 auto; padding:1em; }
button { padding:8px 16px; margin:0.5em 0; }
pre { background:#f5f5f5; padding:0.5em; }
</style>
{% endblock %}
{% block body %}
<div class="container">
  <h1>Admin</h1>
  <button id="reindexBtn">Reindex</button>
  <button id="summaryBtn">Refresh Summary</button>
  <button id="entitiesBtn">Reload Entities</button>
  <pre id="status"></pre>
</div>
<script>
function post(url){return fetch(url,{method:'POST'}).then(r=>r.json()).then(d=>{document.getElementById('status').textContent=JSON.stringify(d,null,2);});}

document.getElementById('reindexBtn').onclick=()=>post('{{ url_for('admin.reindex') }}');
document.getElementById('summaryBtn').onclick=()=>post('{{ url_for('admin.refresh_summary') }}');
document.getElementById('entitiesBtn').onclick=()=>post('{{ url_for('admin.reload_entities_view') }}');
</script>
{% endblock %}
